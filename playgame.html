<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Papan Pengurangan</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"></script>
    <style>
      body {
        background-color: #f6fce1;
        font-family: "Comic Sans MS", sans-serif;
      }
      .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      .bordered-box {
        background-color: #fffbe6;
        border: 2px solid #d0a328;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      .drop-area {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        height: 90px;
      }

      /* Custom stick style */
      .stick {
        background-color: #ffcc80; /* Warna oranye lembut */
        height: 50px;
        width: 10px;
        border-radius: 5px;
        cursor: grab;
        margin-right: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      }
    </style>
  </head>
  <body class="flex items-center justify-center h-screen">
    <div class="flex space-x-3">
      <!-- Area Soal -->
      <div class="bordered-box">
        <h1 class="text-xl font-bold text-center">AYO Mencoba!</h1>
        <div class="mt-4">
          <h2 class="text-lg font-semibold text-center">Soal</h2>
          <div class="text-center text-3xl font-bold" id="question"></div>
        </div>
        <!-- Area Tempat Stik -->
        <div class="bordered-box flex flex-col items-center mt-10">
          <div class="text-center text-lg font-semibold">
            Stik untuk Menghitung
          </div>
          <div
            class="stick-box mt-4 flex flex-row space-x-4 justify-center"
            id="stickBox"
          >
            <!-- Stik-stik -->
            <div class="stick" draggable="true" data-value="1"></div>
            <div class="stick" draggable="true" data-value="1"></div>
            <div class="stick" draggable="true" data-value="1"></div>
            <!-- Tambahkan lebih banyak stik jika diperlukan -->
          </div>
        </div>
      </div>

      <!-- Tempat Penampung Puluhan & Satuan -->
      <div
        class="bordered-box col-span-2 w-full p-4 bg-gray-100 shadow-lg rounded-md"
      >
        <h2 class="text-lg font-semibold text-center">Tempat Stik</h2>
        <div class="flex">
          <h1 class="font-bold text-lg text-center flex-1 w-1/2">Puluhan</h1>
          <h1 class="font-bold text-lg text-center flex-1 w-1/2">Satuan</h1>
        </div>

        <div class="grid grid-cols-2 grid-rows-3 gap-4">
          <!-- Baris 1, Kolom 1 (Label Puluhan) -->

          <!-- Baris 2, Kolom 1 (Puluhan Awal) -->
          <div
            class="drop-area w-full bg-slate-500 text-white text-center p-4 rounded-md"
            id="puluhan"
          >
            <span id="puluhanCount" class="font-bold text-lg hidden">0</span>
          </div>

          <!-- Baris 2, Kolom 2 (Satuan Awal) -->
          <div
            class="drop-area w-full bg-slate-300 text-black text-center p-4 rounded-md"
            id="satuan1"
          >
            <span id="satuanCount" class="font-bold text-lg hidden">0</span>
          </div>




          <!-- Baris 3, Kolom 1 (Pengurangan Puluhan) -->
          <div
            class="drop-area w-full bg-slate-500 text-white text-center p-4 rounded-md"
            id="puluhan2"
          >
            <span id="puluhanCount2" class="font-bold text-lg hidden">0</span>
          </div>

          <!-- Baris 3, Kolom 2 (Pengurangan Satuan) -->
          <div
            class="drop-area w-full bg-slate-300 text-black text-center rounded-md"
            id="satuan2"
          >
            <span id="satuanCount2" class="font-bold text-lg hidden">0</span>
          </div>

          <!-- Button for validation -->
          <div class="col-span-2 text-center">
            <div class="top-1/2 text-2xl font-bold text-right">-</div>
            <div class="border-t-4 border-black"></div>
            <div class="flex justify-center items-center mt-4">
              <input
                type="text"
                id="answer"
                class="border border-gray-300 p-2 rounded-lg w-24 text-center"
                placeholder="Jawaban"
              />
              <div class="mx-5">
                hasil: <span id="hasil" class="font-bold text-lg"></span>
              </div>
            </div>
          </div>

          <button
            id="validateButton"
            class="mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg mx-auto flex"
          >
            Nilai Tempat
          </button>
          <button
            id="checkAnswer"
            class="mt-4 px-4 py-2 bg-green-500 text-white rounded-lg mx-auto flex"
          >
            Cek Jawaban
          </button>
        </div>
      </div>
    </div>

    <script>
      // Fungsi untuk menghasilkan bilangan acak dari 1 hingga max
      function getRandomInt(max) {
        return Math.floor(Math.random() * max) + 1;
      }

      // Buat soal dengan bilangan acak
      let minuend = getRandomInt(30); // Bilangan pertama (maksimal 30)
      let subtrahend = getRandomInt(minuend - 1); // Bilangan kedua (lebih kecil dari bilangan pertama)
      let correctAnswer = minuend - subtrahend;

      // Tampilkan soal
      // Tampilkan soal dengan format khusus
      document.getElementById("question").innerHTML = `
            <div class="text-center">
            <!-- Bagian Minuend (angka atas) -->
            <div class="text-4xl font-bold">${minuend}</div>
            
            <!-- Bagian Subtrahend (angka bawah dengan tanda pengurangan) -->
            <div class="relative">
                <!-- Tanda pengurangan (-) -->
                <!-- Subtrahend (angka bawah) -->
                <div class="text-4xl font-bold ml-6">${subtrahend}</div>
                <div class="absolute right-0 top-1/2 -translate-y-1/2 text-2xl font-bold">-</div>

            </div>
            
            <!-- Garis Bawah -->

            <div class="border-t-4 border-black mt-2"></div>
            </div>
            `;

      // Variabel untuk menyimpan jumlah nilai yang di-drop
      let puluhanTotal = 0;
      let satuanTotal = 0;
      let puluhanPengurang = 0;
      let satuanPengurang = 0;

      // Stik yang bisa di-drag
      const sticks = document.querySelectorAll(".stick");
      const puluhanArea = document.getElementById("puluhan");
      const satuanArea = document.getElementById("satuan1");
      const puluhanAreaPengurang = document.getElementById("puluhan2");
      const satuanAreaPengurang = document.getElementById("satuan2");
      const puluhanCount = document.getElementById("puluhanCount");
      const satuanCount = document.getElementById("satuanCount");

      const puluhanCountPengurang = document.getElementById("puluhanCount2");
      const satuanCountPengurang = document.getElementById("satuanCount2");

      sticks.forEach((stick) => {
        stick.addEventListener("dragstart", dragStart);
      });

      [
        puluhanArea,
        satuanArea,
        puluhanAreaPengurang,
        satuanAreaPengurang,
      ].forEach((area) => {
        area.addEventListener("dragover", dragOver);
        area.addEventListener("drop", drop);
      });

      function dragStart(event) {
        event.dataTransfer.setData("value", event.target.dataset.value);
        event.dataTransfer.setData("element", event.target.outerHTML);
      }

      function dragOver(event) {
        event.preventDefault();
      }

      function drop(event) {
        event.preventDefault();
        const value = parseInt(event.dataTransfer.getData("value"));
        const element = event.dataTransfer.getData("element");
        const target = event.target.id;

        // Cek apakah yang di-drop adalah di puluhan atau satuan awal
        if (target === "puluhan") {
          const multipliedValue = value * 10; // Kalikan nilai dengan 10 untuk puluhan
          if (puluhanTotal + multipliedValue <= 30) {
            // maksimal 30 untuk puluhan
            puluhanTotal += multipliedValue;
            puluhanCount.textContent = puluhanTotal;
            event.target.insertAdjacentHTML("beforeend", element);
          } else {
            alert("Maksimal nilai puluhan adalah 30.");
          }
        } else if (target === "satuan1") {
          if (satuanTotal + value <= 9) {
            // maksimal 9 untuk satuan
            satuanTotal += value;
            satuanCount.textContent = satuanTotal;
            event.target.insertAdjacentHTML("beforeend", element);
          } else {
            alert("Maksimal nilai satuan adalah 9.");
          }
        } else if (target === "puluhan2") {
          const multipliedValue = value * 10; // Kalikan nilai dengan 10 untuk puluhan pengurang
          if (puluhanPengurang + multipliedValue ) {
            puluhanPengurang += multipliedValue;
            puluhanCountPengurang.textContent = puluhanPengurang;
            event.target.insertAdjacentHTML("beforeend", element);
          } else {
            alert("Nilai pengurang puluhan melebihi nilai awal.");
          }
        } else if (target === "satuan2") {
          if (satuanPengurang + value <= 9) {
            // Batas maksimal 9 untuk satuan pengurang
            satuanPengurang += value;
            satuanCountPengurang.textContent = satuanPengurang;
            event.target.insertAdjacentHTML("beforeend", element);
          } else {
            alert("Maksimal nilai pengurang satuan adalah 9.");
          }
        }
      }
      document
        .getElementById("validateButton")
        .addEventListener("click", function () {
          // Menghitung jumlah total di baris 1 (Puluhan dan Satuan)
          const totalBaris1 = puluhanTotal + satuanTotal;

          // Menghitung jumlah total di baris 2 (Puluhan2 dan Satuan2)
          const totalBaris2 = puluhanPengurang + satuanPengurang;
          const hasil = totalBaris1 - totalBaris2;

          // Variabel untuk menampilkan hasil
          const hasilElement = document.getElementById("hasil");

          // Cek apakah total baris 1 sesuai dengan minuend dan total baris 2 sesuai dengan subtrahend
          if (totalBaris1 === minuend && totalBaris2 === subtrahend) {
            // Tampilkan hasil pengurangan pada elemen dengan id "hasil"

            alert(
              "Benar! Total baris 1 sesuai dengan minuend dan total baris 2 sesuai dengan subtrahend."
            );
          } else if (totalBaris1 !== minuend) {
            alert("Salah! Baris 1 (jumlah stick) tidak sesuai dengan minuend.");
          } else if (totalBaris2 !== subtrahend) {
            alert(
              "Salah! Baris 2 (jumlah stick) tidak sesuai dengan subtrahend."
            );
          }
        });

      // Cek Jawaban
      document
        .getElementById("checkAnswer")
        .addEventListener("click", function () {
          const answer = document.getElementById("answer").value;
          const totalBaris1 = puluhanTotal + satuanTotal;

          // Menghitung jumlah total di baris 2 (Puluhan2 dan Satuan2)
          const totalBaris2 = puluhanPengurang + satuanPengurang;
          const hasil = totalBaris1 - totalBaris2;

          // Variabel untuk menampilkan hasil
          const hasilElement = document.getElementById("hasil");
          if (answer == correctAnswer) {
            hasilElement.textContent = hasil;
            alert("Jawaban benar!");
          } else {
            alert("Jawaban salah, coba lagi.");
          }
        });
    </script>
  </body>
</html>
